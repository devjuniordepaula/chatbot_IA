<!doctype html>

<html lang="pt-br">
    <head>
        <meta charset="utf-8">
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0"
        >
        <title>Chatbot</title>
    </head>
    <body>

        <main id="container"></main>

        <script
            crossorigin
            src="https://unpkg.com/react@18/umd/react.development.js"
        ></script>
        <script
            crossorigin
            src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"
        ></script>
        <script
            crossorigin
            src="https://unpkg.com/@babel/standalone/babel.min.js"
        ></script>

        <script type="text/babel">

            function ChatInput() {
                return (
                    <div>
                        <input
                            type="text"
                            placeholder="Send a message to Chatbot..."
                            size="30"
                        />
                        <button>Send</button>
                    </div>
                );
            };

            function ChatMessage({ message, sender }) {

                return (
                    <div>
                        {sender === 'robot' && (
                            <img src="./assets/robot.png" width="50" />
                        )}
                        {message}
                        {sender === 'user' && (
                            <img src="./assets/user.png" width="50" />
                        )}
                    </div>
                );
            };

            function Chatmessages(){
                const chatMessages = [{
                    message: "Hello",
                    sender: "user",
                    id: '001'
                }, {
                    message: "Hello, how can i help you?",
                    sender: "robot",
                    id: '002'
                }, {
                    message: "Get date today",
                    sender: "user",
                    id: '003'
                }, {
                    message: "Today is September 29",
                    sender: "robot",
                    id: '004'
                }]; 

                function sendMessage(){
                    chatMessages.push({
                        message: 'teste',
                        sender: 'user',
                        //criando uma id aleatorio
                        id: crypto.randomUUID()
                    })           
                    
                    console.log(chatMessages)
                }


                return (    
                    <>
                        <button onClick={sendMessage}>Send Message </button>  
                        {chatMessages.map(chatMessage => {
                            return(
                                                
                                <ChatMessage
                                    message={chatMessage.message}
                                    sender={chatMessage.sender}
                                    key={chatMessage.id}
                                />
                                                    
                            );
                        })};
                    </>
                );
            }

            function App() {

                return (
                    <>
                        <ChatInput />
                        <Chatmessages />
                    </>
                );
            };

            const container = document.querySelector('#container');
            ReactDOM.createRoot(container).render(<App />);

        </script>
    </body>
</html>
